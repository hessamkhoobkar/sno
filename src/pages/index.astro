---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
const allBlogPost = await getCollection("blog");
---

<BaseLayout>
  <main>
    <div class="grid grid-cols-3 gap-4">
      {
        allBlogPost.map((blog, index) => (
          <div
            class={`relative post-card flex flex-col justify-start items-start gap-2 cursor-pointer ${
              index === 0 ? "col-span-2" : "col-span-1"
            }`}
          >
            <div class="overflow-hidden">
              <img src={blog.data.heroImage} alt={blog.data.title} />
            </div>
            <div
              class={`post-info flex flex-col justify-start items-start gap-4 ${
                index === 0 ? "absolute inset-4" : ""
              }`}
            >
              <h3 class="text-2xl font-serif font-bold">{blog.data.title}</h3>
              <p class="text-sm">{blog.data.description.slice(0, 80)}...</p>
              <div class="flex justify-start items-center gap-2 text-xs">
                <span class="text-stone-400 hover:text-stone-950 underline">
                  {blog.data.authors[0]}
                </span>
                <span class="text-stone-400">{blog.data.pubDate}</span>
                <span class="text-sky-600">{blog.data.tags[0]}</span>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </main>
</BaseLayout>

<style>
  .post-card .post-info {
    animation: cardhover-out 1.5s cubic-bezier(0.075, 0.82, 0.165, 1) forwards;
  }
  .post-card:hover .post-info {
    animation: cardhover-in 1.5s cubic-bezier(0.075, 0.82, 0.165, 1) forwards;
  }

  .post-card img {
    transform: scale(1);
    transition: transform 1.5s cubic-bezier(0.075, 0.82, 0.165, 1);
  }
  .post-card:hover img {
    transform: scale(1.1);
    transition: transform 1.5s cubic-bezier(0.075, 0.82, 0.165, 1);
  }

  @keyframes cardhover-in {
    0% {
      transform: translateY(0px);
    }
    100% {
      transform: translateY(10px);
    }
  }

  @keyframes cardhover-out {
    0% {
      transform: translateY(10px);
    }
    100% {
      transform: translateY(0px);
    }
  }
</style>
